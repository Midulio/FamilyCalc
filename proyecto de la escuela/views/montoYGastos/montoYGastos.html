<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link href="montoYGastos.css" rel="stylesheet"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <title>FamilyCalc</title>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

     <nav class="navbar ">
        <div class="container-fluid d-flex align-items-center justify-content-between">
            <button class="btn btn-primary menu" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions"><img src="../../src/list.svg"></button>
            <div class="offcanvas offcanvas-start interiorMenu" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions" aria-labelledby="offcanvasWithBothOptionsLabel">
            <div class="offcanvas-header">
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body interiorMenu">
                    <a href="../../index.html"><img src="../../src/house.svg">Inicio</a>
                <a href="../montoYGastos/montoYGastos.html"><img src="../../src/bank.svg">Monto y gastos</a>
                <a href="#"><img src="../../src/chart-line.svg">Estadísticas de gastos</a>
                <a href="../grupoFamiliar/registrar_casa.html"><img src="../../src/users.svg">Grupo familiar</a>
                <a href="#"><img src="../../src/percent.svg">Impuestos y valores</a>
                <a href="#"><img src="../../src/receipt.svg">Resumen de gastos</a>
                <div class="container-fluid d-flex justify-content-between contactos-box">
                    <a class="contactos" href="#"><img src="../../src/facebook-logo.svg"></a>
                    <a class="contactos" href="#"><img src="../../src/instagram-logo.svg"></a>
                    <a class="contactos" href="#"><img src="../../src/envelope.svg"></a>
                    <a class="contactos" href="#"><img src="../../src/phone.svg"></a>
                </div>
            </div>
            </div>
            <a href="../../index.html" class="logo"><h1><img src="../../src/logo.png">FamilyCalc</h1></a>
            <div>
                <a href="" class="btn menu" type="button"><img src="../../src/robot.svg"></a>
                <a href="../iniciarSesion/iniciarSesion.html" class="btn menu" type="button"><img src="../../src/user-circle.svg"></a>
            </div>
        </div>
    </nav>
    <section class="monto">
        <h2>Tu Monto</h2>
        <input type="number" id="sueldoInput" placeholder="Sueldo" />
        <button id="guardarSueldo">Guardar monto</button>
        <p>Saldo restante: $<span id="saldoDisponible">0</span></p>
    </section>
    <div class="juntar"> 
        <section class="gastos">
            <h2>Gastos</h2>
            <label for="categoria" class="form-label">Categoría</label>
            <select id="categoria">
            <option value="" selected disabled>Categoria</option>
            <option value="Comida">Comida</option>
            <option value="Suscripciones">Suscripciones</option>
            <option value="Facturas">Facturas</option>
            <option value="Compras">Compras</option>
            <option value="Otros">Otros</option>
            </select>
            <label for="descripcion" class="form-label">Descripcion</label>
            <input type="text" id="descripcion" placeholder="Descripción sobre el gasto" />
            <label for="monto" class="form-label">Precio</label>
            <input type="number" id="monto" />
            <button id="agregarGasto">Agregar gasto</button>
        </section>
        <section class="lista scrollcontainer">
            <div class="interiorLista">
                <div id="listaGastos" class="celda"></div>
            </div>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    const sueldoInput = document.getElementById("sueldoInput");
    const guardarSueldoBtn = document.getElementById("guardarSueldo");
    const saldoDisponible = document.getElementById("saldoDisponible");

    const categoria = document.getElementById("categoria");
    const descripcion = document.getElementById("descripcion");
    const monto = document.getElementById("monto");
    const agregarBtn = document.getElementById("agregarGasto");

    const listaGastos = document.getElementById("listaGastos");

    let sueldo = parseFloat(localStorage.getItem("sueldo")) || 0;
    let gastos = JSON.parse(localStorage.getItem("gastos")) || [];

    function totalGastos() {
        return gastos.reduce((acc, g) => acc + g.monto, 0);
    }

    function renderSueldo() {
        saldoDisponible.textContent = Math.max(sueldo - totalGastos(), 0).toFixed(2);
        sueldoInput.value = sueldo || "";
    }

    function renderGastos() {
        listaGastos.innerHTML = "";
        gastos.forEach((gasto, i) => {
        const card = document.createElement("div");
        card.className = "gasto-item"; // estilízalo como quieras
        card.innerHTML = `
            <div class="celdaIndividual">
            <p><strong>${gasto.categoria}:</strong> <p>Descripcion: ${gasto.descripcion}</p> - $${gasto.monto.toFixed(2)}</p>
            <button onclick="eliminarGasto(${i})">Eliminar</button>
            </div>
        `;
        listaGastos.appendChild(card);
        });
        renderSueldo();
    }

    guardarSueldoBtn.addEventListener("click", () => {
        sueldo = parseFloat(sueldoInput.value) || 0;
        localStorage.setItem("sueldo", sueldo);
        renderSueldo();
    });

    agregarBtn.addEventListener("click", () => {
        const nuevoGasto = {
        categoria: categoria.value,
        descripcion: descripcion.value,
        monto: parseFloat(monto.value)
        };
        if (!nuevoGasto.categoria || !nuevoGasto.descripcion || isNaN(nuevoGasto.monto)) {
        alert("Completa todos los campos correctamente.");
        return;
        }
        gastos.push(nuevoGasto);
        localStorage.setItem("gastos", JSON.stringify(gastos));
        categoria.value = "";
        descripcion.value = "";
        monto.value = "";
        renderGastos();
    });

    function eliminarGasto(index) {
        gastos.splice(index, 1);
        localStorage.setItem("gastos", JSON.stringify(gastos));
        renderGastos();
    }

    // Inicialización
    renderSueldo();
    renderGastos();
    </script>
</body>
</html>